<!DOCTYPE html>
<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.js"></script>
</head>

<body>
<script>
let n = 3;
let j = 40 ;

let col = [40,40,80];
let cols =[250,250,100];

let x = [];
let xs = [];
let xa = [];

let sizex = window.innerWidth;
let sizey = window.innerHeight;

function ga(x1,y1,x2,y2){
gravr=sqrt((x2-x1)**2+(y2-y1)**2)
gravax=(Math.sqrt(gravr**2-(y2-y1)**2))/(gravr**3)
gravay=(Math.sqrt(gravr**2-(x2-x1)**2))/(gravr**3)
if(x2-x1<0){gravax=-gravax};
if(y2-y1<0){gravay=-gravay};
return [gravax*j,gravay*j] ;
};


for(let i = 0; i < n; i++) {
  x.push(Math.random()*sizex);
  x.push(Math.random()*sizey);

  xa.push(0);
};
for(let i = 0; i < n; i++) {

  xs.push((0.5-Math.random()));
  xs.push((0.5-Math.random()));

};


function setup() {
  createCanvas(sizex, sizey);
  noStroke();
  background(col);
};

function draw() {
fill(col[0],col[1],col[2],2);
rect(0, 0, sizex, sizey);

for(i=0;i<2*n;i++){xa[i]=0};

for(i=0;i<n;i++){
  for(k=0;k<n;k++){
    if(i!=k){
      xa[i*2]+=ga(x[i*2],x[i*2+1],x[k*2],x[k*2+1])[0];
      xa[i*2+1]+=ga(x[i*2],x[i*2+1],x[k*2],x[k*2+1])[1];
    };
  };
};


for(i=0;i<2*n;i++){xs[i]=xs[i]+xa[i]};
for(i=0;i<2*n;i++){x[i]=x[i]+xs[i]};

fill(cols);
for(i=0;i<n;i++){ellipse(x[2*i], x[2*i+1], 2, 2);};
}

</script>
</body>
</html>
