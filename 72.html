<!DOCTYPE html>
<html lang="ja">
<head>
<title>jsontest</title>
<script>
const url = "meta.json";    // JSONファイル名
const color1 = "#fa0";
const color2 = "#456";

function gradc(c1,c2,k){
  let a = [parseInt(c1.charAt(1),16),parseInt(c1.charAt(2),16),parseInt(c1.charAt(3),16)];
  let b = [parseInt(c2.charAt(1),16),parseInt(c2.charAt(2),16),parseInt(c2.charAt(3),16)];
  let c = [a[0]*(1-k)+b[0]*k,a[1]*(1-k)+b[1]*k,a[2]*(1-k)+b[2]*k];
  let c3 = "#"+Math.floor(c[0]).toString(16)+Math.floor(c[1]).toString(16)+Math.floor(c[2]).toString(16);
  return c3
}



// 起動時の処理
window.addEventListener("load", ()=>{
  // JSON表示用
  let result = document.getElementById("div1");
  fetch(url)
  .then( response => response.json())
  .then( data => {

    //本題
    let lapse = Math.floor(Date.now()/1000)-data._1.mtime //経過秒数
    lapse = lapse/100000
    let grad = 1-Math.exp(-lapse);

    result.style.color = gradc(color1,color2,grad);
    result.innerHTML = data._1.mdate;



  });
});
</script>
</head>
<body>
<div id="div1"></div>
</body>
</html>
