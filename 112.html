<html>
  <head>
    <title>NeoSig example</title>
    <script src="js/sigma.js"></script>
<script src="js/sigmamin.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sigma@1.2.1/src/renderers/canvas/sigma.canvas.edges.curvedArrow.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sigma@1.2.1/plugins/sigma.layout.forceAtlas2/supervisor.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sigma@1.2.1/plugins/sigma.layout.forceAtlas2/worker.js"></script>
<script src="js/meta2.js"></script>

  </head>
  <style>
    html { height:100%px;}
body {height: 100%;margin:0;}
#sigma-container { width:100%; height:100%; background-color:#E1E1E1}
  </style>
  <body>
    <div id='sigma-container'></div>
  </body>
  <script>
    // Initiate Sigma
var s = new sigma(
  {
    renderer: {
      container: document.getElementById('sigma-container'),
      type: 'canvas'
    },
    settings: {
      edgeLabelSize: 'proportional',
      minArrowSize: 5,
      labelThreshold:15
    }
  }
);

var neo4jConfig = {
  url: 'bolt://localhost',
  user: 'neo4j',
  password: 'admin',
  driver: {
    encrypted:true,
  	trust:'TRUST_CUSTOM_CA_SIGNED_CERTIFICATES'
  }
};

var style = {
  labels: {
    Person : {
      label: 'name',
      color: '#654321',
      size: 10,
      icon: {
        name: 'f007',
        color: '#FFF',
        scale: 1.0
      }
    },
    Movie : {
      label: 'title',
      color: '#123456',
      size: 10,
      icon: {
        name: 'f008',
        color: '#FFF',
        scale: 1.0
      }
    }
  },
  edges: {
    ACTED_IN: {
      color: '#040404',
      size:1,
      label: 'roles'
    },
    DIRECTED: {
      color: '#040404',
      size:1,
      label: 'roles'
    }
  }
};

Neo4jGraph(neo4jConfig, style, 'MATCH (n)-[r]->(m) RETURN n,r,m', {}).then( function(result) {
  // load the graph
  s.graph.read(result);
  // enable drag'n'drop
  sigma.plugins.dragNodes(s, s.renderers[0]);
  // start layout
  s.startForceAtlas2();
  setTimeout(() => { s.stopForceAtlas2() }, Math.log(result.nodes.length*result.edges.length)*1000);
 })
  </script>
</html>