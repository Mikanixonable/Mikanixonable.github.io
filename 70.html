<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="style.css">
<script src="main.js"></script>
<title>いかにもJSON形式というデータ</title>
<style media="screen">
/* style.css */
@charset "utf-8";

*{
margin: 0;
padding: 0;
}

body{
margin: 2em;
}

#result{
padding: 1em;
background-color: whitesmoke;
color: royalblue;
}

table{
border-collapse: collapse;
}

table, td{
border: solid 1px royalblue;
}

td{
padding: 1em;
}
</style>
<script type="text/javascript">


  const url = "sosdan.json";    // JSONファイル名
  let result;

  // JSONファイルを整形して表示する
  function formatJSON(data){
    // 整形して表示
    let html = "<table>";
    html += "<caption>" + data.caption + "</caption>";

    for(let member of data.members){
    html += "<tr><td>" + member.name + "</td><td>" + member.type + "</td></tr>";
    }
    html += "</table>";

    html += "<p>ぜんぶで" + data.members.length + "人";    // 要素memberの配列要素数

    result.innerHTML = html;
  }

  // 起動時の処理
  window.addEventListener("load", ()=>{
  // JSON表示用
  result = document.getElementById("result");

  // JSONファイルを取得して表示
  fetch(url)
  .then( response => response.json())
  .then( data => formatJSON(data));

  });


</script>
</head>
<body>
<div id="result">JSONデータを取得中...</div>
</body>
</html>
