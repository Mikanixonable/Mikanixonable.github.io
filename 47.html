<!DOCTYPE html>
<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.js"></script>
</head>

<body>
<script>
let x =[];
let xs = [];
let n = 20;

for (let i = 0; i < n*2; i++) {
  x.push(Math.random()*400);
  xs.push(Math.random()/8);
};
let xa = new Array(2*n)
let r = new Array(n)

let diameter = 1;

function setup() {
  createCanvas(400, 400);
  noStroke();
}

function draw() {
fill(256, 7);
rect(0, 0, width, height);
fill(0,0,0);

for(i=0;i<n;i++){

r[i] = Math.sqrt((200-x[i*2])**2+(200-x[i*2+1])**2)

xa[i*2] = (Math.sqrt(r[i]**2-(200 - x[i*2+1])**2))/(r[i]**3)*6;
xa[i*2+1] = (Math.sqrt(r[i]**2-(200 - x[i*2])**2))/(r[i]**3)*6;
if(x[i*2]>200){xa[i*2]=-xa[i*2]};
if(x[i*2+1]>200){xa[i*2+1]=-xa[i*2+1]};
if(r[i]<n){xa[n*i]=0;xa[n*i+1]=0};
};


for(i=0;i<2*n;i++){xs[i]=xs[i]+xa[i]};
for(i=0;i<2*n;i++){x[i]=x[i]+xs[i]};

for(i=0;i<n;i++){ellipse(x[2*i], x[2*i+1], diameter, diameter);};



ellipse(200, 200, 6, 6);
}

</script>


</body>
</html>
